<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Images — HARRY6</title>

  <style>
    :root{
      --text:#111;
      --muted: rgba(0,0,0,.48);
      --line: rgba(0,0,0,.10);
      --leftPad: 56px;
    }
    *{ box-sizing:border-box; }
    html, body{
      margin:0;
      background:#fff;
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "PingFang SC","Microsoft YaHei", sans-serif;
      min-height: 100vh;
    }

    /* brand */
    .brand{
      position:fixed;
      top:44px;
      left:var(--leftPad);
      margin-left:-12px;
      z-index:1000;
      text-decoration:none;
      color:var(--text);
      font-weight:600;
      font-size:18px;
      letter-spacing:.10em;
      text-transform:uppercase;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,0.85);
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      transition: opacity .15s ease, box-shadow .15s ease;
    }
    .brand:hover{
      opacity:.78;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    /* 顶部菜单按钮 */
    .menuToggle{
      display:none;
      position:fixed;
      top:44px;
      right:22px;
      width:44px;
      height:44px;
      border:none;
      background: rgba(255,255,255,0.85);
      border-radius: 999px;
      cursor:pointer;
      z-index:1001;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      transition: opacity .15s ease;
    }
    .menuToggle:hover{
      opacity:.75;
    }
    .menuToggle svg{
      width:20px;
      height:20px;
      stroke:var(--text);
      stroke-width:1.5;
      fill:none;
    }

    /* nav */
    .nav{
      position:fixed;
      left:var(--leftPad);
      top:50%;
      transform:translateY(-50%);
      z-index:1000;
      user-select:none;
    }
    .navItem{ margin: 18px 0; }

    .navBtn{
      display:inline-block;
      cursor:pointer;
      border:none;
      background: rgba(255,255,255,0.85);
      padding: 10px 12px;
      margin-left:-12px;
      font-size:15px;
      letter-spacing:.24em;
      text-transform:uppercase;
      color:var(--text);
      border-radius: 999px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .navBtn:hover{
      color:var(--text);
      background: rgba(255,255,255,0.95);
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    .navBtn.is-active{ color:var(--text); }

    /* 主容器 */
    .container{
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      padding: 100px 40px 160px;
    }

    /* 主展示区 */
    .mainDisplay{
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 70px;
      position: relative;
    }

    .imageWrapper{
      max-height: 65vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .imageWrapper img{
      max-height: 65vh;
      max-width: 100%;
      object-fit: contain;
      display: block;
    }

    /* 右侧极简信息 */
    .imageInfo{
      position: absolute;
      right: 60px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 11px;
      font-weight: 400;
      letter-spacing: 0.12em;
      color: rgba(0,0,0,0.5);
      text-align: right;
      line-height: 1.8;
    }

    /* 底部档案池 - 书签式缩略图 */
    .archivePool{
      display: flex;
      justify-content: center;
      gap: 3px;
      padding: 40px 40px 20px;
      overflow-x: auto;
      scrollbar-width: none;
    }
    .archivePool::-webkit-scrollbar{
      display: none;
    }

    .archiveBookmark{
      width: 12px;
      height: 45px;
      flex-shrink: 0;
      background: #f0f0f0;
      cursor: pointer;
      position: relative;
      transition: all 0.2s ease;
      overflow: hidden;
    }
    .archiveBookmark:hover{
      background: #e0e0e0;
    }
    .archiveBookmark.active{
      background: var(--text);
    }

    .archiveBookmark img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      filter: grayscale(100%);
      transition: filter 0.2s ease;
    }
    .archiveBookmark.active img,
    .archiveBookmark:hover img{
      filter: grayscale(0%);
    }
    .archiveBookmark.active img{
      opacity: 0.7;
    }

    /* email */
    .emailWrap{
      position: fixed;
      left: 50%;
      bottom: 28px;
      transform: translateX(-50%);
      z-index:1000;
      font-size:13px;
      letter-spacing:.06em;
      color:var(--muted);
      text-align: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    .emailWrap.visible{
      opacity: 1;
      pointer-events: auto;
    }
    .emailCopy{
      cursor:pointer;
      padding: 6px 10px;
      border:1px solid transparent;
      border-radius:999px;
      transition: border-color .15s ease, color .15s ease;
    }
    .emailCopy:hover{
      border-color: var(--line);
      color: var(--text);
    }

    /* 小屏幕设备调整 */
    @media (max-width: 1024px){
      :root{
        --leftPad: 22px;
      }
      .brand{ top:22px; }
      .menuToggle{ top:22px; }
      .nav{ display: none; }
      .menuToggle{ display: block; }

      .container{
        padding: 80px 20px 140px;
      }

      .mainDisplay{
        padding: 0 70px;
      }

      .imageWrapper{
        max-width: 75%;
      }
      .imageWrapper img{
        max-height: 50vh;
      }

      .imageInfo{
        position: absolute;
        right: 20px;
        transform: translateY(-50%);
        font-size: 10px;
      }

      .archivePool{
        padding: 20px;
        gap: 3px;
      }
      .archiveBookmark{
        width: 12px;
        height: 45px;
      }
    }

    /* 全屏菜单 */
    .fullscreenMenu{
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #fff;
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      overflow-y: auto;
      padding: 80px 32px 32px;
    }
    .fullscreenMenu.is-open{
      opacity: 1;
      pointer-events: auto;
    }

    .menuCloseBtn{
      position: absolute;
      top: 32px;
      right: 32px;
      width: 44px;
      height: 44px;
      border: none;
      background: none;
      cursor: pointer;
      font-size: 32px;
      color: #000;
      line-height: 1;
      padding: 0;
    }
    .menuCloseBtn:hover{
      opacity: 0.6;
    }

    .menuCategoryTitle{
      font-size: 48px;
      font-weight: 300;
      letter-spacing: 0.02em;
      color: #000;
      padding: 32px 0 16px 0;
      margin: 0;
      border-bottom: 1px solid rgba(0,0,0,0.1);
      text-decoration: none;
      display: block;
    }
    .menuCategoryTitle:hover{
      opacity: 0.7;
    }

    .menuItem{
      display: block;
      font-size: 18px;
      font-weight: 400;
      letter-spacing: 0.04em;
      color: rgba(0,0,0,0.7);
      padding: 16px 0 16px 24px;
      text-decoration: none;
      transition: all 0.2s ease;
    }
    .menuItem:hover{
      color: #000;
      padding-left: 32px;
    }
    .menuItem .year{
      color: rgba(0,0,0,0.4);
      font-size: 14px;
      margin-left: 0.5em;
    }

    /* 全平台统一全屏菜单 */
    @media (min-width: 1025px){
      .menuToggle{
        display: block !important;
      }
      .nav{
        display: none !important;
      }
      .fullscreenMenu{
        display: block !important;
      }
    }

    @media (min-width: 768px) and (max-width: 1024px){
      .menuToggle{
        display: block !important;
      }
      .nav{
        display: none !important;
      }
      .fullscreenMenu{
        display: block !important;
      }
    }

    @media (max-width: 767px){
      .fullscreenMenu{
        display: block !important;
      }
      .menuToggle{
        display: block !important;
      }
    }
  </style>
</head>

<body>

  <a class="brand" href="../">HARRY6</a>

  <nav class="nav" aria-label="Primary">
    <div class="navItem" data-menu="projects"><button class="navBtn" type="button">PROJECTS</button></div>
    <div class="navItem" data-menu="images"><button class="navBtn" type="button">IMAGES</button></div>
    <div class="navItem" data-menu="about"><button class="navBtn" type="button">ABOUT</button></div>
  </nav>

  <button class="menuToggle" id="menuToggle" aria-label="Menu">
    <svg viewBox="0 0 24 24">
      <path d="M3 12h18M3 6h18M3 18h18"/>
    </svg>
  </button>

  <div class="container">
    <!-- 主展示区 -->
    <div class="mainDisplay">
      <div class="imageWrapper">
        <img id="mainImage" src="" alt="">
      </div>
      <div class="imageInfo" id="imageInfo">
        <span id="infoCode"></span><br>
        <span id="infoYear"></span><br>
        <span id="infoMedium"></span>
      </div>
    </div>

    <!-- 底部档案池 -->
    <div class="archivePool" id="archivePool"></div>
  </div>

  <div class="emailWrap">
    <span id="emailCopy" class="emailCopy" title="Click to copy">wenhao_liu888@163.com</span>
  </div>

  <script>
    const REPO = location.pathname.split("/").filter(Boolean).length > 1 ? "/" + location.pathname.split("/")[1] + "/" : "/";
    const BASE = REPO;

    const PROJECTS = [
      { title: "Yellow River", year: "2025", href: BASE + "projects/yellow-river/" },
      { title: "Frontispiece", year: "2024", href: BASE + "projects/frontispiece/" },
      { title: "Formless Buddha", year: "2023", href: BASE + "projects/formless-buddha/" },
      { title: "Yellow", year: "2021", href: BASE + "projects/yellow/" }
    ];

    const IMAGES_HREF = BASE + "images/";
    const ABOUT_HREF = BASE + "about/";

    const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
    const isIPad = window.innerWidth >= 768 && window.innerWidth <= 1024;

    const panel = document.createElement('div');
    panel.className = 'panel';
    panel.role = 'dialog';
    panel.setAttribute('aria-hidden', 'true');
    panel.innerHTML = '<ul class="panelList"></ul>';
    document.body.appendChild(panel);

    const panelList = panel.querySelector('.panelList');
    const items = Array.from(document.querySelectorAll('.navItem'));
    const btns = Array.from(document.querySelectorAll('.navBtn'));

    let activeKey = null;
    let closeTimer = null;

    function setActiveButton(key){
      btns.forEach(b => b.classList.remove('is-active'));
      const item = items.find(i => i.dataset.menu === key);
      if(item) item.querySelector('.navBtn').classList.add('is-active');
    }

    function renderList(list){
      panelList.innerHTML = list.map(it => `
        <li>
          <a class="panelLink" href="${it.href}">
            ${it.title} <span class="year">— ${it.year}</span>
          </a>
        </li>
      `).join('');
    }

    function positionPanelNearButton(btn){
      const r = btn.getBoundingClientRect();
      const gap = 14;
      let left = Math.round(r.right + gap);
      let top  = Math.round(r.top + r.height/2);

      panel.style.top = `${top}px`;
      panel.style.transform = 'translateY(-50%)';

      const panelWidth = Math.min(panel.offsetWidth || 360, window.innerWidth - 24);
      if(left + panelWidth + 12 > window.innerWidth){
        left = Math.round(r.left - gap - panelWidth);
      }
      left = Math.max(12, left);
      panel.style.left = `${left}px`;
    }

    function openPanelFor(key, btn){
      clearTimeout(closeTimer);
      activeKey = key;
      setActiveButton(key);

      if(key === 'projects') renderList(PROJECTS);

      panel.classList.add('is-open');
      panel.setAttribute('aria-hidden','false');
      requestAnimationFrame(() => positionPanelNearButton(btn));
    }

    function closePanel(){
      activeKey = null;
      btns.forEach(b => b.classList.remove('is-active'));
      panel.classList.remove('is-open');
      panel.setAttribute('aria-hidden','true');
    }

    function scheduleClose(){
      clearTimeout(closeTimer);
      closeTimer = setTimeout(closePanel, 220);
    }

    items.forEach(item => {
      const key = item.dataset.menu;
      const btn = item.querySelector('.navBtn');

      if((!isTouchDevice || isIPad) && key === 'projects'){
        item.addEventListener('mouseenter', () => openPanelFor(key, btn));
        item.addEventListener('mouseleave', scheduleClose);
      }

      if(isIPad || !isTouchDevice){
        btn.addEventListener('click', (e) => {
          if(key === 'images'){
            window.location.href = IMAGES_HREF;
            e.preventDefault();
            return;
          }
          if(key === 'about'){
            window.location.href = ABOUT_HREF;
            e.preventDefault();
            return;
          }
          if(panel.classList.contains('is-open') && activeKey === key){
            closePanel();
          }else{
            openPanelFor(key, btn);
          }
          e.preventDefault();
        });
      }else{
        btn.addEventListener('touchstart', (e) => {
          if(key === 'images'){
            window.location.href = IMAGES_HREF;
            return;
          }
          if(key === 'about'){
            window.location.href = ABOUT_HREF;
            return;
          }
          if(panel.classList.contains('is-open') && activeKey === key){
            closePanel();
          }else{
            openPanelFor(key, btn);
          }
        }, {passive: true});
      }
    });

    if(!isTouchDevice || isIPad){
      panel.addEventListener('mouseenter', () => clearTimeout(closeTimer));
      panel.addEventListener('mouseleave', scheduleClose);
    }

    if(isTouchDevice && !isIPad){
      document.addEventListener('touchstart', (e) => {
        const isNav = e.target.closest('.nav');
        const isPanel = e.target.closest('.panel');
        if(!isNav && !isPanel && panel.classList.contains('is-open')) closePanel();
      });
    }else{
      document.addEventListener('mousedown', (e) => {
        const isNav = e.target.closest('.nav');
        const isPanel = e.target.closest('.panel');
        if(!isNav && !isPanel && panel.classList.contains('is-open')) closePanel();
      });
    }

    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && panel.classList.contains('is-open')) closePanel();
    });

    // 邮箱复制
    const emailEl = document.getElementById('emailCopy');
    let toastTimer = null;

    async function copyEmail(){
      const text = emailEl.textContent.trim();
      try{
        await navigator.clipboard.writeText(text);
      }catch(err){
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
      }
      emailEl.textContent = 'COPIED!';
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>emailEl.textContent = 'wenhao_liu888@163.com', 900);
    }
    emailEl.addEventListener('click', copyEmail);

    // 邮箱隐藏 - 滚到底部显示
    const emailWrap = document.querySelector('.emailWrap');
    if(emailWrap){
      const trigger = document.createElement('div');
      trigger.className = 'footer-trigger';
      trigger.style.height = '1px';
      document.body.appendChild(trigger);

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            emailWrap.classList.add('visible');
          } else {
            emailWrap.classList.remove('visible');
          }
        });
      }, { threshold: 0.1 });
      observer.observe(trigger);
    }
  </script>

  <style>
    .panel{
      position:fixed;
      width: 360px;
      max-width: calc(100vw - 24px);
      background:#fff;
      border:1px solid var(--line);
      padding: 18px;
      z-index:1001;
      opacity:0;
      pointer-events:none;
      transform: translateY(-8px);
      transition: opacity .14s ease, transform .14s ease;
    }
    .panel.is-open{
      opacity:1;
      pointer-events:auto;
      transform: translateY(0);
    }
    .panel::before{
      content:"";
      position:absolute;
      left:-18px;
      top:0;
      width:18px;
      height:100%;
      background:transparent;
    }
    .panelList{ list-style:none; padding:0; margin:0; }
    .panelList li{ margin: 10px 0; }
    .panelLink{
      text-decoration:none;
      color:var(--text);
      font-size:16px;
      letter-spacing:.02em;
      display:inline-block;
      padding: 6px 4px;
    }
    .panelLink:hover{ opacity:.75; }
    .panelLink .year{
      color:var(--muted);
      margin-left:.35em;
      letter-spacing:.06em;
    }
  </style>

  <!-- 全屏菜单 -->
  <div class="fullscreenMenu" id="fullscreenMenu">
    <button class="menuCloseBtn" id="menuCloseBtn" aria-label="Close menu">&times;</button>

    <h2 class="menuCategoryTitle">PROJECTS</h2>
    <a class="menuItem" href="projects/yellow-river/">Yellow River <span class="year">(2025)</span></a>
    <a class="menuItem" href="projects/frontispiece/">Frontispiece <span class="year">(2024)</span></a>
    <a class="menuItem" href="projects/formless-buddha/">Formless Buddha <span class="year">(2023)</span></a>
    <a class="menuItem" href="projects/yellow/">Yellow <span class="year">(2021)</span></a>

    <a class="menuCategoryTitle" href="./">IMAGES</a>

    <a class="menuCategoryTitle" href="../about/">ABOUT</a>
  </div>

  <script>
    // 全屏菜单脚本 - 简化版，更可靠
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.getElementById('menuToggle');
      const fullscreenMenu = document.getElementById('fullscreenMenu');
      const menuCloseBtn = document.getElementById('menuCloseBtn');

      if(!menuToggle || !fullscreenMenu) return;

      // 计算 BASE 路径
      const pathParts = location.pathname.split("/").filter(Boolean);
      const BASE = pathParts.length > 0 ? "/" + pathParts[0] + "/" : "/";

      // 遍历所有菜单链接，直接设置 href
      const allLinks = fullscreenMenu.querySelectorAll('a');
      allLinks.forEach(function(link) {
        const href = link.getAttribute('href');
        if(href && !href.startsWith('/') && !href.startsWith('http')) {
          link.setAttribute('href', BASE + href);
        }
      });

      // 打开菜单
      menuToggle.addEventListener('click', function(e) {
        e.preventDefault();
        fullscreenMenu.style.display = 'block';
        fullscreenMenu.style.opacity = '1';
        fullscreenMenu.style.pointerEvents = 'auto';
        document.body.style.overflow = 'hidden';
      });

      // 关闭菜单
      function closeMenu() {
        fullscreenMenu.style.opacity = '0';
        fullscreenMenu.style.pointerEvents = 'none';
        document.body.style.overflow = '';
      }

      menuCloseBtn.addEventListener('click', closeMenu);

      // 点击外部关闭
      fullscreenMenu.addEventListener('click', function(e) {
        if(e.target === fullscreenMenu) {
          closeMenu();
        }
      });
    });
  </script>

  <!-- 档案数据 -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const images = [
        { code: '1·2·3·5', year: '2025', medium: 'Digital Art', src: './assets/001.jpg', thumb: './assets/thumbs/001.jpg' },
        { code: '2·3·5·8', year: '2025', medium: 'Digital Art', src: './assets/002.jpg', thumb: './assets/thumbs/002.jpg' },
        { code: '1·4·6·9', year: '2025', medium: 'Digital Art', src: './assets/003.jpg', thumb: './assets/thumbs/003.jpg' },
        { code: '2·5·7·11', year: '2025', medium: 'Digital Art', src: './assets/004.jpg', thumb: './assets/thumbs/004.jpg' },
        { code: '3·4·8·12', year: '2025', medium: 'Digital Art', src: './assets/005.jpg', thumb: './assets/thumbs/005.jpg' },
        { code: '1·6·9·14', year: '2025', medium: 'Digital Art', src: './assets/006.jpg', thumb: './assets/thumbs/006.jpg' },
        { code: '2·7·11·16', year: '2025', medium: 'Digital Art', src: './assets/007.jpg', thumb: './assets/thumbs/007.jpg' },
        { code: '3·8·13·18', year: '2025', medium: 'Digital Art', src: './assets/008.jpg', thumb: './assets/thumbs/008.jpg' },
        { code: '4·9·14·21', year: '2025', medium: 'Digital Art', src: './assets/009.jpg', thumb: './assets/thumbs/009.jpg' }
      ];

      let currentIndex = 0;
      const mainImage = document.getElementById('mainImage');
      const infoCode = document.getElementById('infoCode');
      const infoYear = document.getElementById('infoYear');
      const infoMedium = document.getElementById('infoMedium');
      const archivePool = document.getElementById('archivePool');

      // 预加载所有图片
      function preloadImages() {
        images.forEach(imgData => {
          const img = new Image();
          img.src = imgData.src;
        });
      }

      function createBookmarks() {
        images.forEach((img, index) => {
          const bookmark = document.createElement('div');
          bookmark.className = 'archiveBookmark' + (index === 0 ? ' active' : '');
          bookmark.innerHTML = `
            <img src="${img.thumb}" alt="${img.code}">
          `;
          bookmark.addEventListener('click', () => showImage(index));
          archivePool.appendChild(bookmark);
        });
      }

      function showImage(index) {
        currentIndex = index;
        const img = images[index];

        // 直接设置src（图片已预加载，会很快显示）
        mainImage.src = img.src;
        infoCode.textContent = img.code;
        infoYear.textContent = img.year;
        infoMedium.textContent = img.medium;

        const bookmarks = archivePool.querySelectorAll('.archiveBookmark');
        bookmarks.forEach((b, i) => {
          b.classList.toggle('active', i === index);
        });
      }

      function showPrev() {
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        showImage(currentIndex);
      }

      function showNext() {
        currentIndex = (currentIndex + 1) % images.length;
        showImage(currentIndex);
      }

      document.addEventListener('keydown', (e) => {
        if(e.key === 'ArrowLeft') showPrev();
        if(e.key === 'ArrowRight') showNext();
      });

      // 初始化
      preloadImages();
      createBookmarks();
      showImage(0);
    });
  </script>

</body>
</html>
